# 問1: サブネットマスク

## クラスには無駄が多い?

クラスが決まると、ネットワークアドレス部とホストアドレス部が決定する。

クラスA  11111111. 00000000. 00000000. 00000000. 

「１」で記述されている部分が**IPネットワークアドレス**を示すビットの範囲で、「０」で記述されている部分が**IPホストアドレス**を示す範囲である。

## サブネットワークとサブネットマスク

現在、IPアドレスを利用するときは、ネットワーク部とホスト部の切れ目はクラスに縛られない。サブネットマスクと呼ばれる識別子が導入され、クラスAやクラスB, クラスB、クラスCのネットワークを小さく区切るサブネットワークアドレスが利用される。<br>
これは、クラスごとに決まるホスト部をサブネットワークアドレス部として使うことにより、複数の物理ネットワークに分類できるようにする仕組みである。

サブネットワークの導入により、IPアドレスは2つの識別子で表されるようになった。１つはIPアドレスで、もう１つはネットワーク部を表すサブネットマスクである。


<br>
<br>

# 問2: 経路制御表の集約

ネットワークアドレスのビットのパターンを考えて階層的に配置すると、内部的には複数のサブネットワークから構成されていたとしても、外部には代表する１つのネットワークアドレスで経路制御することができる。<br>
このように、上手にネットワークを構築して経路制御情報を集約することで、経路制御表を小さくすることができる。

経路制御表が大きくなると、経路制御表の管理に多くのメモリ空間やCPUパワーが必要になるため、経路制御表を小さくできるのは大きな利点となる。


<br>
<br>

# 問3: DNSによる問い合わせ

リゾルバは、IPアドレスを調べるためにname serverに問い合わせ処理を行う。それを受けたネームサーバーは自分のデータベースに情報があればそれを返すが、情報がない場合にはルートネームサーバーに問い合わせ処理を行う。そしてドメインの木構造を上から順番に辿ることで、目的の情報があるネームサーバーを見つけ、そこから必要な情報を得る。


<br>
<br>

# 問4: DNSの仕組み

DHCPを利用するためには、まずDHCPサーバーを立ち上げなければならない。そして、DHCPで配布するIPアドレスをDHCPサーバーに設定する必要がある。ほかにも、サブネットマスクや経路制御の情報、DNSサーバーのアドレスなども、必要に応じて設定する。

また、DHCPを使用する際、サーバーに障害が発生しても大丈夫なよう複数のDHCPサーバーを起動することが推奨されている。しかし、それを行なった場合、片一方のDHCPサーバーが割り当てたIPアドレスを別のDHCPサーバーが配布してしまう可能性がある。

配布するIPアドレスや配布されたIPアドレスがすでに使用されていないかどうかを調べるため、DHCPサーバーやDHCPクライアントには次のような機能をつけることになっている。

### 1. DHCPサーバー

IPアドレスを配布する前にICMPエコー要求パケットを送信し、返事がこないことを確認する。

### 2. DHCPクライアント

DHCPサーバーから配布されたIPアドレスに対して、ARP要求パケットを送信し、応答が来ないことを確認する。


<br>
<br>

# 問5: 2つのトランスポートプロトコルTCPとUDP

TCP/IPでトランスポート層の機能を果たす代表的なプロトコルが「TCP」と「UDP」である。

## TCP(Transmission Control Protocol)

TCPはコネクション指向で、信頼性のあるストリーム型のプロトコル。<br>
ストリームとは切れ目のないデータ構造のことで、アプリケーションがTCPを使ってメッセージを送信すると、送信した順番は保たれるが、区切りのないデータ構造として、受信側のアプリケーションに届く。

### UDP(User Datagram Protocol)

UDPは、信頼性のないデータグラム型のプロトコルである。<br>
細かい処理は上層部のアプリケーションが担うことになる。UDPの場合には、送信したときのメッセージの大きさは保たれるが、パケットが到達する保証がないため、必要に応じてアプリケーションがメッセージの再送処理をしなければならない。


<br>
<br>

# 問6: コネクション管理

TCPはコネクション指向の通信を提供する。<br>
コネクション指向では、データ通信に先立って、通信相手との間で通信を始める準備をしてから通信を行う。

UDPとは違い、TCPはデータ通信前にTCPヘッダだけからなるコネクション確立要求のパケット(SYNパケット)を送信して確認応答を待つ。相手から確認応答が送られてきた場合にはデータ通信が可能になるが、送られてこなければ、データ通信を開始することはできない。<br>
また、通信が終了したときにはコネクションの切断処理を行う(FINパケット)。


<br>
<br>

# 問7: ウインドウ制御で速度向上